---
title: 投流广告原理与流程说明
tags:
  - Larave
  - 广告
categories:
  - 产品
  - 使用手册
date: 2024-03-03 13:23:12
description: 投流广告原理与流程说明
lang: zh-CN
---

> 实现投流量过程中的订单回告，S2S


## 工作原理
整个工作原理为，广告商通过告诉得到他们自己生成的一个唯一值，我们就叫他 token吧，通过把这个token 告诉到我们的结算页面与LP页面，比如

```
https://www.example.com/products/{slug}?refer={token}
```
具体实现代码为
```
$refer = $request->input("refer");

if(!empty($refer)) { 
    $request->session()->put('refer', $refer);
}
```
对应的产品或者结算页面就是把对应的内容保存到服务器的session数据中，并且在用户发生订单后，也是会把对应的 token 内容保存到 订单中。

## 订单回告
> 在订单支付完成后，会有对应的脚本，对这些已支付的订单实现同步到其他平台，比如仓库系统，shopify 系统，广告系统等平台，这个时候就会获取到对应的 token 内容，根据广告商的参数需要，同步到对应的平台。

## 注意点
1） 在订单推送工程中，需要留意网络通信的情况，是否正常，对方API是否有保存的情况，这种情况一般都是基于日志的方式保存，从而方便问题的查询定位。  
2）推送的机制是需要只能成功推送一次原理，所以需要有对应的数据标识，对于已经推送过的订单，要标识下状态，避免重复的推送处理。  

